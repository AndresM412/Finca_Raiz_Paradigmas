import tkinter as tk
import requests
import webbrowser

def buscar_direccion():
    direccion = entrada_direccion.get()  # Obtener la dirección del campo de entrada
    if direccion:
        try:
            # Utilizar la API de Nominatim para geocodificar la dirección
            url = f"https://nominatim.openstreetmap.org/search?format=json&q={direccion}"
            response = requests.get(url)
            data = response.json()
            if data:
                latitud = data[0]['lat']
                longitud = data[0]['lon']
                mostrar_mapa(latitud, longitud)
                etiqueta_ubicacion.config(text="Ubicación encontrada. Abriendo mapa...")
            else:
                etiqueta_ubicacion.config(text="Dirección no encontrada.")
        except Exception as e:
            etiqueta_ubicacion.config(text=f"Error al buscar la dirección: {e}")
    else:
        etiqueta_ubicacion.config(text="Por favor, ingresa una dirección.")

def mostrar_mapa(latitud, longitud):
    url_mapa = f"https://www.openstreetmap.org/?mlat={latitud}&mlon={longitud}#map=12/{latitud}/{longitud}"
    webbrowser.open(url_mapa)

# Configurar la ventana de Tkinter
ventana_principal = tk.Tk()
ventana_principal.title("Ubicación y Mapa con Tkinter")
ventana_principal.geometry("600x300")

# Configurar etiqueta de instrucción
etiqueta_instruccion = tk.Label(ventana_principal, text="Ingresa tu dirección y presiona 'Buscar':")
etiqueta_instruccion.pack(pady=10)

# Configurar campo de entrada para la dirección
entrada_direccion = tk.Entry(ventana_principal, width=50)
entrada_direccion.pack(pady=5)

# Configurar botón para buscar dirección
boton_buscar_direccion = tk.Button(ventana_principal, text="Buscar", command=buscar_direccion)
boton_buscar_direccion.pack(pady=10)

# Configurar etiqueta para mostrar resultados o errores
etiqueta_ubicacion = tk.Label(ventana_principal, text="")
etiqueta_ubicacion.pack(pady=10)

# Iniciar el bucle de Tkinter
ventana_principal.mainloop()
